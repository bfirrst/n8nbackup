{
  "active": true,
  "connections": {
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "vectorStore",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Switch3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Telegram",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Telegram",
            "type": "main",
            "index": 0
          },
          {
            "node": "OpenAI1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI1": {
      "main": [
        [
          {
            "node": "Telegram1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI2": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP¬†Request (media lookup)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory1": {
      "ai_memory": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "HTTP¬†Request (media lookup)": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Telegram2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader1": {
      "ai_document": [
        [
          {
            "node": "Insert into Supabase Vectorstore1",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI2": {
      "ai_embedding": [
        [
          {
            "node": "Insert into Supabase Vectorstore1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Download File1": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "File Created1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "File Updated1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set File ID1": {
      "main": [
        [
          {
            "node": "Delete Old Docs1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Character Text Splitter1": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader1",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Insert into Supabase Vectorstore1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "Set File ID1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete Old Docs1": {
      "main": [
        [
          {
            "node": "Download File1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request2": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "HTTP Request3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Insert into Supabase Vectorstore1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gmail Trigger1": {
      "main": [
        [
          {
            "node": "Insert into Supabase Vectorstore2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Set File ID2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader2": {
      "ai_document": [
        [
          {
            "node": "Insert into Supabase Vectorstore2",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI3": {
      "ai_embedding": [
        [
          {
            "node": "Insert into Supabase Vectorstore2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Set File ID2": {
      "main": [
        [
          {
            "node": "Delete Old Docs2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Character Text Splitter2": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader2",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Insert into Supabase Vectorstore2": {
      "main": [
        []
      ]
    },
    "Delete Old Docs2": {
      "main": [
        []
      ]
    },
    "Download File": {
      "main": [
        [
          {
            "node": "Transcribe",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcribe": {
      "main": [
        [
          {
            "node": "Set Text (voice)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Text": {
      "main": [
        [
          {
            "node": "Set Text (final)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Text (voice)": {
      "main": [
        [
          {
            "node": "Set Text (final)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch3": {
      "main": [
        [
          {
            "node": "Download File",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Set Text",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Download File2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download File2": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI3": {
      "main": [
        [
          {
            "node": "Set Text image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Text image": {
      "main": [
        [
          {
            "node": "Set Text (final)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "OpenAI3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Text (final)": {
      "main": [
        [
          {
            "node": "OpenAI2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request3": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "vectorStore": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-06-13T14:07:51.391Z",
  "id": "9tMS8k0jeg1LPDnl",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "OIL Rag",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "gpt-4.1-mini"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2100,
        760
      ],
      "id": "6c91f859-3648-4916-8b8e-8c8f59dcc307",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        2460,
        880
      ],
      "id": "71ac5740-5327-4654-93aa-52cfd5184354",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "–ß–∞—Ç",
        "height": 1320,
        "width": 1640,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1680,
        -20
      ],
      "typeVersion": 1,
      "id": "38318170-b320-4f71-9f43-76aaeeb30526",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "–ó–∞–≥—Ä—É–∑—á–∏–∫",
        "height": 820,
        "width": 1640,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        20,
        -20
      ],
      "typeVersion": 1,
      "id": "53168418-091c-4a24-a79c-3f5ad12742c9",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Set Text (final)').item.json.text }}",
        "options": {
          "systemMessage": "You MUST call tool \"vectorStore\" before answering.\n\n# –†–æ–ª—å\n–¢—ã ‚Äì –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π —á–∞—Ç-–±–æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ ¬´___¬ª.   \n–†–∞–±–æ—Ç–∞–µ—à—å –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É RAG: **—Å–Ω–∞—á–∞–ª–∞** –≤—ã–∑—ã–≤–∞–µ—à—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç tools.supabase.vectorStore\n(called ‚ÄúvectorStore‚Äù) —Å –∑–∞–ø—Ä–æ—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, **–∑–∞—Ç–µ–º** —Å—Ç—Ä–æ–∏—à—å –æ—Ç–≤–µ—Ç\n–Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞.\n\n# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ \n0. –°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ - —Ç–µ–±–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–µ –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ —Ç–µ–º–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –ø–æ—Ö–æ–∂–µ–≥–æ –±–æ—Ç–∞ –∏–ª–∏ –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫–æ–≥–æ-–ª–∏–±–æ –±–æ—Ç–∞ –∏–ª–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –∫–∞–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ - –≤–æ–∑–≤—Ä–∞—â–∞–π –∫–ª–∏–µ–Ω—Ç–∞ –∫ —Ç–µ–º–µ –¥–∏–∞–ª–æ–≥–∞. –¢—ã –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –∫–æ–º–ø–∞–Ω–∏–∏, –æ –º–∞—Å–ª–µ, –ø–æ–º–æ–≥–∞—Ç—å —Å –ø–æ–¥–±–æ—Ä–æ–º –º–∞—Å–ª–∞ –∏ –æ—Ñ–æ—Ä–º–ª—è—Ç—å –∑–∞—è–≤–∫—É –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ, –Ω–∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–µ –æ—Ç–≤–µ—á–∞–π - –≤–æ–∑–≤—Ä–∞—â–∞–π –∫ —Ç–µ–º–µ. –ù–ò–ö–û–ì–î–ê –Ω–µ –¥–∞–≤–∞–π —Ä–µ–∫–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ\n1. **vectorStore ‚Äì –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º.**  \n   –ï—Å–ª–∏ –≤—ã–¥–∞—á–∞ –ø—É—Å—Ç–∞ ‚Üí –ø–æ–ø—Ä–æ—Å–∏ —É—Ç–æ—á–Ω–∏—Ç—å –≤–æ–ø—Ä–æ—Å.  \n2. –û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –±–µ–∑ –∂–∏—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞, # –∏ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤.  \n3. –¶–µ–Ω—ã –Ω–µ –Ω–∞–∑—ã–≤–∞–π (—É —Ç–µ–±—è –∏—Ö –Ω–µ—Ç).  \n4. –ü—Ä–∏ –ø–æ–¥–±–æ—Ä–µ –º–∞—Å–ª–∞:\n   ‚Ä¢ –ø–∏—à–∏ –æ—Ç–≤–µ—Ç –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:\n–î–ª—è 4-—Ç–∞–∫—Ç–Ω—ã—Ö –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π —É –Ω–∞—Å –µ—Å—Ç—å –º–æ—Ç–æ—Ä–Ω—ã–µ –º–∞—Å–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:\n\n- SWD Rheinol Primus LDI 0W-30 SN/CF/A5/B5\n- SWD Rheinol Primus DPF 5W-30\n- Fouke 4T 10W-40 SN / A3\n- Fouke 4T 20W-50\n- SWD Rheinol Rasenmaher-4T SAE30 (–º–∏–Ω–µ—Ä–∞–ª—å–Ω–æ–µ)\n\n–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–≥—É –ø–æ–º–æ—á—å –ø–æ–¥–æ–±—Ä–∞—Ç—å –º–∞—Å–ª–æ —Ç–æ—á–Ω–µ–µ, —É—Ç–æ—á–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ç–∏–ø –¥–≤–∏–≥–∞—Ç–µ–ª—è, —É—Å–ª–æ–≤–∏—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –º–∞—Å–ª—É.\n\n–ü–æ–¥–±–æ—Ä –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π ‚Äì –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.\n   ‚Ä¢ —É—Ç–æ—á–Ω—è–π –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã;  \n   ‚Ä¢ –≤ –æ—Ç–≤–µ—Ç–µ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –¥–æ–±–∞–≤–ª—è–π –¥–∏—Å–∫–ª–µ–π–º–µ—Ä:  \n     ¬´–ü–æ–¥–±–æ—Ä –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π ‚Äì –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º¬ª.  \n   ‚Ä¢ –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (–Ω–∞–ø—Ä. CF-4), –∞ –≤ –±–∞–∑–µ –µ—Å—Ç—å –Ω–æ–≤–∞—è (CK-4),  \n     –ø–æ—è—Å–Ω–∏, —á—Ç–æ CK-4 –µ—ë –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –∏ —Ç–æ–∂–µ –º–æ–∂–µ—Ç –ø–æ–¥–æ–π—Ç–∏.  \n5. –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ —Ö–æ—á–µ—Ç –∫—É–ø–∏—Ç—å (–ø–∏—à–µ—Ç —Ö–æ—á—É –∫—É–ø–∏—Ç—å –∏–ª–∏ —Ö–æ—á—É –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑) / –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ ‚Üí  \n   –ø–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏, —Å–æ–æ–±—â–∏, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –º–µ–Ω–µ–¥–∂–µ—Ä—É, –∏ –ø–æ—Å—Ç–∞–≤—å –≤–æ–ø—Ä–æ—Å,\n   –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä:  \n   ¬´–£–¥–æ–±–Ω–æ –ª–∏ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å–µ–≥–æ–¥–Ω—è?¬ª).  \n6. –ö–æ–º–∞–Ω–¥–∞ **/start** ‚Üí –≤—ã–≤–æ–¥–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ:  \n¬´–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ ‚Äî —è —á–∞—Ç-–±–æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ ¬´–†–µ–π–Ω—Å–∫–∏–µ –º–∞—Å–ª–∞¬ª.\n\n–ß–µ–º –º–æ–≥—É –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω:\n\n1. –ü–æ–¥–±–∏—Ä–∞—é –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –º–∞—Å–ª–æ –∏–ª–∏ –∞–Ω—Ç–∏—Ñ—Ä–∏–∑ –¥–ª—è –≤–∞—à–µ–π —Ç–µ—Ö–Ω–∏–∫–∏:\n‚ÄÇ‚ÄÇ‚Ä¢ –Ω–∞–∑–æ–≤–∏—Ç–µ –º–æ–¥–µ–ª—å / —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –∏–ª–∏ –æ–ø–∏—à–∏—Ç–µ —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã;\n‚ÄÇ‚ÄÇ‚Ä¢ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ ‚Äî —É—Ç–æ—á–Ω—é –¥–µ—Ç–∞–ª–∏.\n\n2. –û—Ç–ø—Ä–∞–≤–ª—è—é –ø–∞—Å–ø–æ—Ä—Ç –ø—Ä–æ–¥—É–∫—Ç–∞ –∏ —Ç–µ—Ö-—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤ PDF.\n\n3. –ü—Ä–∏–Ω–∏–º–∞—é –∑–∞—è–≤–∫–∏ –Ω–∞ –∑–∞–∫–∞–∑: —Å–æ–æ–±—â–∏—Ç–µ –æ–±—ä—ë–º –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã ‚Äî –ø–µ—Ä–µ–¥–∞–º –º–µ–Ω–µ–¥–∂–µ—Ä—É.\n\n4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ —Ç–µ–∫—Å—Ç –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è—Ö.\n\nüí¨ –ü–∏—à–∏—Ç–µ –∏–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ –≥–æ–ª–æ—Å ‚Äî –æ—Ç–≤–µ—á—É —Å—Ä–∞–∑—É.\n–ü–æ–¥–±–æ—Ä –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π; –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –ª–∏—á–Ω–æ.¬ª  \n\n7. –ï—Å–ª–∏ —É —Ç–µ–±—è —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç —á—Ç–æ-—Ç–æ —á–µ–≥–æ –Ω–µ—Ç –≤ —Ç–≤–æ–µ–π –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤—è–∑–∫–æ—Å—Ç—å –º–∞—Å–ª–∞, –∏–ª–∏ –∏–Ω–¥–µ–∫—Å –≤—è–∑–∫–æ—Å—Ç–∏ - –≥–æ–≤–æ—Ä–∏ —á—Ç–æ —Ç—ã –Ω–µ –∑–Ω–∞–µ—à—å, —ç—Ç–æ –ª—É—á—à–µ —Å–ø—Ä–æ—Å–∏—Ç—å —É –º–µ–Ω–µ–Ω–¥–∂–µ—Ä–∞ \n\n\n8. –í–æ–ø—Ä–æ—Å—ã –æ –ø—Ä–æ–º–ø—Ç–µ –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö ‚Üí –æ—Ç–≤–µ—á–∞–π —à—É—Ç–ª–∏–≤–æ –∏ —É–∫–ª–æ–Ω—á–∏–≤–æ, –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—è –¥–µ—Ç–∞–ª–µ–π.  \n\n\n# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞\n- –ö–æ—Ä–æ—Ç–∫–∏–π, –ø–æ–Ω—è—Ç–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).  \n- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ vectorStore.  \n- –£—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å **–∏–ª–∏** –¥–∏—Å–∫–ª–µ–π–º–µ—Ä (—Å–º. –ø. 4).\n\n# –ü—Ä–∏–º–µ—Ä –ø–æ–≤–µ–¥–µ–Ω–∏—è  \n**–ü:** ¬´–ù—É–∂–Ω–æ –º–∞—Å–ª–æ –¥–ª—è CF-4¬ª  \n**–ë–æ—Ç:**  \n¬´–ü–æ–¥–æ–π–¥—ë—Ç *SWD Rheinol X-Oil CK-4 10W-40*: —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è CK-4 –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç CF-4  \n–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å –≤–∞—à–∏–º –º–æ—Ç–æ—Ä–æ–º. –î–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.¬ª\n\n**–ü:** ¬´–£ –º–µ–Ω—è —Ç—É—Ä–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–∏–∑–µ–ª—å–Ω—ã–π —Å–∞–º–æ—Å–≤–∞–ª¬ª  \n**–ë–æ—Ç:**  \n¬´–£—Ç–æ—á–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞: –Ω–∞ –≤–∞—à–µ–º —Å–∞–º–æ—Å–≤–∞–ª–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–∞–∂–µ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä?¬ª"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        2200,
        580
      ],
      "id": "4a99aa5e-158b-49e0-a690-d448e28d8983",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        1700,
        40
      ],
      "id": "1a457a6a-103c-4e06-bd03-7e01b9a76d04",
      "name": "Telegram Trigger",
      "webhookId": "70eb31cd-7c28-4398-9f13-515e22318388",
      "credentials": {
        "telegramApi": {
          "id": "VndfCa1ejVV4cgie",
          "name": "maslotest"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "text": "={{ $('AI Agent').item.json.output }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3040,
        580
      ],
      "id": "da98a870-358f-42f2-a9af-5540d3acc30e",
      "name": "Telegram",
      "webhookId": "26e0e5a6-5468-41ca-907f-d2dcbff13d7a",
      "credentials": {
        "telegramApi": {
          "id": "VndfCa1ejVV4cgie",
          "name": "maslotest"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "–¢—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥. –û—Ç–≤–µ—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:\n{\n  \"–∫–æ–º–∞–Ω–¥–∞\": \"–æ–±—ã—á–Ω–æ–µ | –ø–æ–∫—É–ø–∫–∞\"\n}\n\n–¢–∏–ø—ã –∫–æ–º–∞–Ω–¥:\n- \"–æ–±—ã—á–Ω–æ–µ\" ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á—Ç–æ-—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, –≤–µ–¥–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ —Ç–¥, –º—ã –≤—ã–±–∏—Ä–∞–µ–º —ç—Ç–æ –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö –∫—Ä–æ–º–µ —Ç–µ—Ö –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –ø–∏—à–µ—Ç —á—Ç–æ —Ö–æ—á–µ—Ç –∫—É–ø–∏—Ç—å\n- \"–ø–æ–∫—É–ø–∫–∞\" ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —Ö–æ—á–µ—Ç –∫—É–ø–∏—Ç—å. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —á—Ç–æ –µ–º—É –Ω—É–∂–Ω–æ –º–∞—Å–ª–æ –∏–ª–∏ –æ–Ω —Ö–æ—á–µ—Ç –º–∞—Å–ª–æ - –Ω–µ —Å–æ–∑–¥–∞–≤–∞–π –∑–∞—è–≤–∫—É. –í—ã–±–∏—Ä–∞–π —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –ø—Ä—è–º–æ –ø–∏—à–µ—Ç —á—Ç–æ —Ö–æ—á–µ—Ç –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑. ",
              "role": "system"
            },
            {
              "content": "={{ $('Set Text (final)').item.json.text }}"
            }
          ]
        },
        "jsonOutput": true,
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2520,
        580
      ],
      "id": "f82f6527-4b69-416c-a8ca-f56c1b37a657",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{$json[\"message\"][\"content\"][\"–∫–æ–º–∞–Ω–¥–∞\"]}}",
                    "rightValue": "–æ–±—ã—á–Ω–æ–µ",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "027a606a-f5ff-4466-977b-4584081cb9c7"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "153401ed-088c-4de8-a8f1-2c4cce6a49f3",
                    "leftValue": "={{ $json[\"message\"][\"content\"][\"–∫–æ–º–∞–Ω–¥–∞\"] }}",
                    "rightValue": "–ø–æ–∫—É–ø–∫–∞",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        2840,
        580
      ],
      "id": "12cfa940-e437-4970-97f2-bf8a07829bc4",
      "name": "Switch1"
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "text": "={{ $json.message.content }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        3120,
        800
      ],
      "id": "1ecaadb8-cb75-425d-a9d0-edda03087a13",
      "name": "Telegram1",
      "webhookId": "26e0e5a6-5468-41ca-907f-d2dcbff13d7a",
      "credentials": {
        "telegramApi": {
          "id": "VndfCa1ejVV4cgie",
          "name": "maslotest"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "–¢–µ–±–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ø–æ–∫—É–ø–∫—É –º–µ–Ω–µ–Ω–¥–∂–µ—Ä—É, –Ω–∞–ø–∏—à–∏ –≤ —É–¥–æ–±–Ω–æ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –≤—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ –ø–∏—à–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç\n",
              "role": "system"
            },
            {
              "content": "={{ $('Set Text (final)').item.json.text }}\n{{ $('Telegram Trigger').item.json.message.from.first_name }}\n"
            }
          ]
        },
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2800,
        800
      ],
      "id": "a25a553d-6b95-4aa2-be3b-a261f43aec56",
      "name": "OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "–¢—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥. –û—Ç–≤–µ—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:\n{\n  \"–∫–æ–º–∞–Ω–¥–∞\": \"–æ–±—ã—á–Ω–æ–µ | –º–µ–¥–∏–∞—Ñ–∞–π–ª\"\n}\n\n–¢–∏–ø—ã –∫–æ–º–∞–Ω–¥:\n- \"–æ–±—ã—á–Ω–æ–µ\" ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á—Ç–æ-—Ç–æ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, –≤–µ–¥–µ—Ç –¥–∏–∞–ª–æ–≥ –∏ —Ç–¥, –º—ã –≤—ã–±–∏—Ä–∞–µ–º —ç—Ç–æ –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö –∫—Ä–æ–º–µ —Ç–µ—Ö –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–∞—Å–ø–æ—Ä—Ç –∏–ª–∏ —Ñ–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–∞\n- \"–º–µ–¥–∏–∞—Ñ–∞–π–ª\" ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–∞—Å–ø–æ—Ä—Ç –∏–ª–∏ —Ñ–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–∞, –≤—ã–±–∏—Ä–∞–π —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –º–µ–¥–∏–∞—Ñ–∞–π–ª, –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ—Å–∏—Ç —á—Ç–æ-—Ç–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –±–µ–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞ –∏–ª–∏ —Ñ–æ—Ç–æ, –æ–Ω —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Ö–æ—á–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç —Ç–µ–∫—Å—Ç –∏ —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ \"–æ–±—ã—á–Ω–æ–µ\"",
              "role": "system"
            },
            {
              "content": "={{ $json.text }}"
            }
          ]
        },
        "jsonOutput": true,
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1780,
        500
      ],
      "id": "b5ac6b89-d3a4-4d51-b3f5-33a33ee531da",
      "name": "OpenAI2",
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{$json[\"message\"][\"content\"][\"–∫–æ–º–∞–Ω–¥–∞\"]}}",
                    "rightValue": "–æ–±—ã—á–Ω–æ–µ",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "027a606a-f5ff-4466-977b-4584081cb9c7"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "153401ed-088c-4de8-a8f1-2c4cce6a49f3",
                    "leftValue": "={{ $json[\"message\"][\"content\"][\"–∫–æ–º–∞–Ω–¥–∞\"] }}",
                    "rightValue": "–º–µ–¥–∏–∞—Ñ–∞–π–ª",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        1840,
        760
      ],
      "id": "3a9a9b1a-fdbf-4969-9914-f01516ba9494",
      "name": "Switch"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Set Text (final)').item.json.text }}",
        "options": {
          "systemMessage": "=–í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, —É—á–∏—Ç—ã–≤–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ –Ω–∞–π—Ç–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–∞–π—Ç–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—Ä–æ—Å–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –≤–µ—Ä–Ω—É—Ç—å —é—Ä–ª –Ω–∞ –Ω–µ–≥–æ, –∏ –≤—Å–µ, –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ, —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫—É –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ —Ç–µ–∫—Å—Ç–∞.\n\n–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:\n{{ $json.data }}\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        2320,
        1000
      ],
      "id": "c33ba61f-0403-408b-8cec-83db9c8d9c6f",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-nano",
          "mode": "list",
          "cachedResultName": "gpt-4.1-nano"
        },
        "options": {
          "temperature": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2240,
        1160
      ],
      "id": "bc181014-dcfa-402a-94ce-364ab6c55ac1",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "contextWindowLength": 50
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        2400,
        1180
      ],
      "id": "89553a41-fb21-4794-881b-c37c87ca331c",
      "name": "Simple Memory1"
    },
    {
      "parameters": {
        "url": "https://nkxxsqytgayjvnkwgrul.supabase.co/rest/v1/media_files",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supabaseApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {}
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "text"
            }
          }
        }
      },
      "name": "HTTP¬†Request (media lookup)",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [
        2120,
        940
      ],
      "id": "21f842e2-b78b-4a6d-9569-841edf23bcdd",
      "credentials": {
        "supabaseApi": {
          "id": "MuLclvsYEK06bpra",
          "name": "oil"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendDocument",
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "file": "={{ $json.output }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2680,
        1000
      ],
      "id": "fe8f0440-d37a-464b-b0c2-d99a4f7ed9e4",
      "name": "Telegram2",
      "webhookId": "5abd5267-9816-4cf0-89de-591e44c34e36",
      "credentials": {
        "telegramApi": {
          "id": "VndfCa1ejVV4cgie",
          "name": "maslotest"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "=file_id",
                "value": "={{ $('Set File ID1').first().json.file_id }}"
              },
              {
                "name": "file_title",
                "value": "={{ $('Set File ID1').first().json.file_title }}"
              }
            ]
          }
        }
      },
      "id": "fd4d504b-c877-48dd-864e-d4c34e44ca07",
      "name": "Default Data Loader1",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        460,
        420
      ]
    },
    {
      "parameters": {
        "model": "text-embedding-3-small",
        "options": {}
      },
      "id": "bf6395aa-fb23-4b72-93e5-98c08eec3634",
      "name": "Embeddings OpenAI2",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1,
      "position": [
        320,
        460
      ],
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $('Set File ID1').item.json.file_id }}",
          "mode": "id"
        },
        "options": {}
      },
      "id": "0e7d4437-4a32-4dcc-92b2-887f9ffc21bf",
      "name": "Download File1",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        980,
        20
      ],
      "executeOnce": true,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "tYDnM9gXl2f1Y9kO",
          "name": "bfirstgang"
        }
      }
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "12oXU8Lf_3JaBiH-UBhUdXuMTfV0JXTEX",
          "mode": "list",
          "cachedResultName": "oil test",
          "cachedResultUrl": "https://drive.google.com/drive/folders/12oXU8Lf_3JaBiH-UBhUdXuMTfV0JXTEX"
        },
        "event": "fileCreated",
        "options": {}
      },
      "id": "6cd05260-46ec-4cab-913c-d11926dbd546",
      "name": "File Created1",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        60,
        20
      ],
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "tYDnM9gXl2f1Y9kO",
          "name": "bfirstgang"
        }
      }
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "12oXU8Lf_3JaBiH-UBhUdXuMTfV0JXTEX",
          "mode": "list",
          "cachedResultName": "oil test",
          "cachedResultUrl": "https://drive.google.com/drive/folders/12oXU8Lf_3JaBiH-UBhUdXuMTfV0JXTEX"
        },
        "event": "fileUpdated",
        "options": {}
      },
      "id": "c600a423-f595-4d58-91d1-c60690fa12da",
      "name": "File Updated1",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        60,
        200
      ],
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "tYDnM9gXl2f1Y9kO",
          "name": "bfirstgang"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "10646eae-ae46-4327-a4dc-9987c2d76173",
              "name": "file_id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "f4536df5-d0b1-4392-bf17-b8137fb31a44",
              "name": "file_type",
              "value": "={{ $json.mimeType }}",
              "type": "string"
            },
            {
              "id": "77d782de-169d-4a46-8a8e-a3831c04d90f",
              "name": "file_title",
              "value": "={{ $json.name }}",
              "type": "string"
            },
            {
              "id": "9bde4d7f-e4f3-4ebd-9338-dce1350f9eab",
              "name": "file_url",
              "value": "={{ $json.webViewLink }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "8263bf33-ee88-4b87-a4b3-4073ce659cc5",
      "name": "Set File ID1",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        580,
        20
      ]
    },
    {
      "parameters": {
        "chunkSize": 2000,
        "chunkOverlap": 200
      },
      "id": "2dc97f4d-dbb5-4662-9f54-16203c50feea",
      "name": "Character Text Splitter1",
      "type": "@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        540,
        520
      ]
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "id"
        },
        "options": {
          "queryName": "documents"
        }
      },
      "id": "d93b4393-16b0-4096-ad5c-99dec92cecb1",
      "name": "Insert into Supabase Vectorstore1",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1,
      "position": [
        340,
        220
      ],
      "credentials": {
        "supabaseApi": {
          "id": "MuLclvsYEK06bpra",
          "name": "oil"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        340,
        20
      ],
      "id": "32c5c76e-9c26-4250-bf08-afd3ece2ce01",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "operation": "delete",
        "tableId": "documents",
        "filterType": "string",
        "filterString": "=metadata->>file_id=like.*{{ $json.file_id }}*"
      },
      "id": "c86a4b1f-f3eb-402a-a853-845388b6badb",
      "name": "Delete Old Docs1",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        780,
        20
      ],
      "alwaysOutputData": true,
      "credentials": {
        "supabaseApi": {
          "id": "MuLclvsYEK06bpra",
          "name": "oil"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const fn = $binary.data.fileName;          // –∏—Å—Ö–æ–¥–Ω–æ–µ –∏–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä\n                                          // \"SWD Rheinol Antifreeze GW-11 (-40¬∞C).pdf\"\n\n// –≤—ã—Ç–∞—â–∏–º ID –∏–∑ –∏–º–µ–Ω–∏, –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ\nconst [, id] = fn.match(/(\\d+)/) || [];\n\n/**\n * –î–µ–ª–∞–µ—Ç –∏–º—è ¬´URL-safe¬ª: –ª–∞—Ç–∏–Ω–∏—Ü–∞/—Ü–∏—Ñ—Ä—ã/- _ . /\n *   –ø—Ä–æ–±–µ–ª—ã, —Å–∫–æ–±–∫–∏, ¬∞, –∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –∏ —Ç.–ø. ‚Üí _\n */\nfunction makeSafePath(name) {\n  return name\n    .normalize('NFKD')              // —Ä–∞–∑–±–∏–≤–∞–µ–º –¥–∏–∞–∫—Ä–∏—Ç–∏–∫—É\n    .replace(/[^\\w.\\-\\/]+/g, '_')   // –≤—Å—ë ¬´–ª–∏—à–Ω–µ–µ¬ª ‚Üí _\n    .replace(/_+/g, '_')            // –ø–æ–¥—Ä—è–¥ –∏–¥—É—â–∏–µ _ ‚Üí –æ–¥–∏–Ω _\n    .replace(/^_+|_+$/g, '');       // —É–±–∏—Ä–∞–µ–º _ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ\n}\n\nconst safePath = makeSafePath(fn);  // \"SWD_Rheinol_Antifreeze_GW-11_-40C_.pdf\"\n\nreturn [{\n  json: {\n    product_id: +id || null,\n    file_type: $binary.data.mimeType === 'image/gif' ? 'gif' : 'passport',\n    file_title: fn,        // –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è –¥–ª—è –≤—ã–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é\n    path: safePath         // –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–ª—é—á –¥–ª—è Storage\n  },\n  binary: {\n    data: $binary.data\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        880,
        420
      ],
      "id": "ac60debd-1fea-42b3-8856-f6a19332b0f8",
      "name": "Code1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://nkxxsqytgayjvnkwgrul.supabase.co/storage/v1/object/media/{{$json[\"path\"]}}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supabaseApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-upsert",
              "value": "true"
            },
            {
              "name": "Content-Type",
              "value": "application/octet-stream"
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1080,
        420
      ],
      "id": "47f266c3-f0f1-42b9-90df-36719cc960ba",
      "name": "HTTP Request2",
      "credentials": {
        "supabaseApi": {
          "id": "MuLclvsYEK06bpra",
          "name": "oil"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9c8b7b18-b04a-4868-9920-57a952f723bd",
              "name": "product_id",
              "value": "={{ $('Code1').item.json.product_id }}",
              "type": "string"
            },
            {
              "id": "23d5a7a5-1ddc-4b3a-a02a-47211205388c",
              "name": "file_type",
              "value": "={{ $('Set File ID1').item.json.file_type }}",
              "type": "string"
            },
            {
              "id": "64368f17-0e67-428d-aa0c-f4404ca9aeab",
              "name": "file_title",
              "value": "={{ $('Code1').item.json.file_title }}",
              "type": "string"
            },
            {
              "id": "bb0d5349-76cb-4d71-bcc2-fe8eaf0362da",
              "name": "=url",
              "value": "=https://nkxxsqytgayjvnkwgrul.supabase.co/storage/v1/object/public/media//{{ $('Code1').item.json.path }}",
              "type": "string"
            },
            {
              "id": "6edc999a-9964-41e7-a0b0-1dfaf0d0dfb5",
              "name": "path",
              "value": "={{ $('Code1').item.json.path }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1220,
        420
      ],
      "id": "c0726513-5450-4e19-8166-980841e57a9f",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://nkxxsqytgayjvnkwgrul.supabase.co/rest/v1/media_files?on_conflict=path",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supabaseApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Prefer",
              "value": "resolution=merge-duplicates,return=representation"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{$json}}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1360,
        420
      ],
      "id": "a4422be0-8110-4ad8-b344-6395757034da",
      "name": "HTTP Request3",
      "credentials": {
        "supabaseApi": {
          "id": "MuLclvsYEK06bpra",
          "name": "oil"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Set File ID1').item.json.file_type }}",
                    "rightValue": "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    },
                    "id": "9ae327be-71cb-4e63-98f5-957d214d51f4"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "3eb3fbc0-1d29-431f-85b2-1d7e508d6b50",
                    "leftValue": "={{ $('Set File ID1').item.json.file_type }}",
                    "rightValue": "application/pdf",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "89a6f68e-9b80-4b7f-b437-942ed49da3df",
                    "leftValue": "={{ $('Set File ID1').item.json.file_type }}",
                    "rightValue": "gif",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0981fd2c-98a3-47f6-b344-c23304302e60",
                    "leftValue": "={{ $('Set File ID1').item.json.file_type }}",
                    "rightValue": "png",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "779b4d36-9338-4609-b5ab-9e886275420f",
                    "leftValue": "={{ $('Set File ID1').item.json.file_type }}",
                    "rightValue": "jpg",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        1160,
        0
      ],
      "id": "0a549f01-2535-4a3c-a049-7507784fde22",
      "name": "Switch2"
    },
    {
      "parameters": {
        "content": "–ó–∞–≥—Ä—É–∑—á–∏–∫",
        "height": 480,
        "width": 1640,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        20,
        820
      ],
      "typeVersion": 1,
      "id": "d6b4c6b3-7e5c-4691-b977-c59cda5abebe",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "simple": false,
        "filters": {
          "includeSpamTrash": true,
          "sender": "price@swd-oil.ru"
        },
        "options": {
          "downloadAttachments": true
        }
      },
      "type": "n8n-nodes-base.gmailTrigger",
      "typeVersion": 1.2,
      "position": [
        60,
        1140
      ],
      "id": "68d93621-5917-440d-aa7d-937cb3f87587",
      "name": "Gmail Trigger1",
      "credentials": {
        "gmailOAuth2": {
          "id": "WiAJTRtDLFYORGYx",
          "name": "Gmail account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "=file_id",
                "value": "={{ $json.id }}"
              },
              {
                "name": "file_title",
                "value": "={{$binary.attachment_0.fileName}}"
              }
            ]
          }
        }
      },
      "id": "6b960522-c1ab-4ca3-9432-400fd7e421ad",
      "name": "Default Data Loader2",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        1180,
        1120
      ]
    },
    {
      "parameters": {
        "model": "text-embedding-3-small",
        "options": {}
      },
      "id": "ee066744-ff28-49d0-995d-162e0468aae1",
      "name": "Embeddings OpenAI3",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1,
      "position": [
        1020,
        1120
      ],
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "10646eae-ae46-4327-a4dc-9987c2d76173",
              "name": "file_id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "f4536df5-d0b1-4392-bf17-b8137fb31a44",
              "name": "file_type",
              "value": "={{$binary.attachment_0.mimeType}}",
              "type": "string"
            },
            {
              "id": "77d782de-169d-4a46-8a8e-a3831c04d90f",
              "name": "file_title",
              "value": "={{$binary.attachment_0.fileName}}",
              "type": "string"
            },
            {
              "id": "9bde4d7f-e4f3-4ebd-9338-dce1350f9eab",
              "name": "file_url",
              "value": "={{ $json.webViewLink }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "9778f660-67f6-4e53-9d6b-8c0021d530e5",
      "name": "Set File ID2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        220,
        860
      ]
    },
    {
      "parameters": {
        "chunkSize": 2000,
        "chunkOverlap": 200
      },
      "id": "20de3b1e-cff3-4cf5-b075-772abe6719d8",
      "name": "Character Text Splitter2",
      "type": "@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        1500,
        1140
      ]
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "id"
        },
        "options": {
          "queryName": "documents"
        }
      },
      "id": "9ca8c33c-2f6e-46e7-8911-e3ab813fec78",
      "name": "Insert into Supabase Vectorstore2",
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1,
      "position": [
        1080,
        860
      ],
      "credentials": {
        "supabaseApi": {
          "id": "MuLclvsYEK06bpra",
          "name": "oil"
        }
      }
    },
    {
      "parameters": {
        "operation": "delete",
        "tableId": "documents",
        "filterType": "string",
        "filterString": "=metadata->>file_title=like.*{{ $json.file_title }}"
      },
      "id": "35e1f3d6-3a1d-4ecb-bdc9-7caff7219905",
      "name": "Delete Old Docs2",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        440,
        860
      ],
      "alwaysOutputData": true,
      "credentials": {
        "supabaseApi": {
          "id": "MuLclvsYEK06bpra",
          "name": "oil"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $json.message.voice.file_id }}"
      },
      "id": "542f0349-9f08-4a4e-a50c-f6cceca98f82",
      "name": "Download File",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2140,
        20
      ],
      "webhookId": "83bb7385-33f6-4105-8294-1a91c0ebbee5",
      "credentials": {
        "telegramApi": {
          "id": "VndfCa1ejVV4cgie",
          "name": "maslotest"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "id": "f79e14ff-b927-46ff-b915-f76f018f1afe",
      "name": "Transcribe",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.6,
      "position": [
        2440,
        20
      ],
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "fe7ecc99-e1e8-4a5e-bdd6-6fce9757b234",
              "name": "text",
              "value": "={{ $json.message.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "e7913795-7d28-40b5-a5cb-5f780bee2c32",
      "name": "Set Text",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2640,
        160
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2b2ff60e-9772-4dc6-8dad-7de37ec83103",
              "name": "text",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2640,
        20
      ],
      "id": "0e3fc785-8120-4f21-90ac-0138cb57c10d",
      "name": "Set Text (voice)"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2b2ff60e-9772-4dc6-8dad-7de37ec83103",
              "name": "text",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2860,
        280
      ],
      "id": "a2e1e0f5-d02f-47ab-a22e-db62033f7b72",
      "name": "Set Text (final)"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.message.voice.file_id }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "id": "9eadf6d7-f703-48cf-84b0-4eab4e8596de"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Voice"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "8c844924-b2ed-48b0-935c-c66a8fd0c778",
                    "leftValue": "={{ $json.message.text }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Text"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1d8a98b9-3313-41fe-972d-47cd8c00cfb8",
                    "leftValue": "={{ $json.message.photo }}",
                    "rightValue": "",
                    "operator": {
                      "type": "array",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "image"
            }
          ]
        },
        "options": {}
      },
      "id": "3c24c5c0-eb89-42e7-b55c-42f6da4811a4",
      "name": "Switch3",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        1920,
        120
      ]
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $json.message.photo[0].file_id }}"
      },
      "id": "c85d3a23-bf89-4edf-9138-73c529b88750",
      "name": "Download File2",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2060,
        280
      ],
      "webhookId": "83bb7385-33f6-4105-8294-1a91c0ebbee5",
      "credentials": {
        "telegramApi": {
          "id": "VndfCa1ejVV4cgie",
          "name": "maslotest"
        }
      }
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "GPT-4O"
        },
        "text": "–¢–µ–±–µ –Ω—É–∂–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å, –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –ø—Ä–æ—Å—Ç–æ –æ–ø–∏—Å–∞—Ç—å —á—Ç–æ —Ç—ã –≤–∏–¥–∏—à—å –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ",
        "inputType": "base64",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        2380,
        280
      ],
      "id": "62332c61-ad4c-4cbb-a291-74cdce678493",
      "name": "OpenAI3",
      "credentials": {
        "openAiApi": {
          "id": "T10Aj8URpRIqIm4V",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "fe7ecc99-e1e8-4a5e-bdd6-6fce9757b234",
              "name": "text",
              "value": "=–ó–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -{{ $('Telegram Trigger').item.json.message.caption }} \n–ß—Ç–æ –±—ã–ª–æ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ - {{ $json.content }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "c64a30c1-971d-4d52-9da0-aef04e6c162f",
      "name": "Set Text image",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2640,
        280
      ]
    },
    {
      "parameters": {
        "jsCode": "// –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ) item\nconst item = items[0];\n\n// –∏–º—è –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –ø–æ–ª—è ‚Äì 'data'\nconst bin = item.binary?.data;\n\n// –ï—Å–ª–∏ Telegram –Ω–µ –ø—Ä–∏—Å–ª–∞–ª –Ω–∞—Å—Ç–æ—è—â–∏–π mimeType ‚Äì —Å—Ç–∞–≤–∏–º —Å–≤–æ–π\nif (bin && bin.mimeType === 'application/octet-stream') {\n  // –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é .jpg –º–µ–Ω—è–µ–º –Ω–∞ image/jpeg (png ‚Üí image/png, webp ‚Üí image/webp)\n  bin.mimeType = 'image/jpeg';\n}\n\n// –≤–æ–∑–≤—Ä–∞—â–∞–µ–º item —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–º\nreturn items;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2240,
        280
      ],
      "id": "d816355b-6a5b-460f-85d8-7d9961ea5a8d",
      "name": "Code"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "vectorStore",
        "toolDescription": "ALWAYS call this tool first",
        "tableName": {
          "__rl": true,
          "value": "=documents",
          "mode": "id"
        },
        "topK": 100,
        "options": {
          "queryName": "match_documents"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.1,
      "position": [
        2420,
        760
      ],
      "id": "a5f4856e-c397-45f2-96b3-5cf7549b4899",
      "name": "vectorStore",
      "credentials": {
        "supabaseApi": {
          "id": "MuLclvsYEK06bpra",
          "name": "oil"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "contextWindowLength": 1
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        2300,
        800
      ],
      "id": "61f9eebf-e68d-4156-847d-96eb418e8ffd",
      "name": "Simple Memory"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "saveDataErrorExecution": "all",
    "saveExecutionProgress": true,
    "callerPolicy": "workflowsFromSameOwner",
    "executionTimeout": 3600
  },
  "staticData": {
    "node:File Created": {
      "lastTimeChecked": "2025-06-29T15:01:41Z"
    },
    "node:File Updated": {
      "lastTimeChecked": "2025-06-29T15:01:41Z"
    },
    "node:File Created1": {
      "lastTimeChecked": "2025-12-03T17:30:46Z"
    },
    "node:File Updated1": {
      "lastTimeChecked": "2025-12-03T17:30:46Z"
    },
    "node:Gmail Trigger": {
      "Gmail Trigger": {
        "lastTimeChecked": 1751220552,
        "possibleDuplicates": [
          "197bceda74fdab27",
          "197bce84d8cdc0b5",
          "197bce2f92dc46f4",
          "197bcdda39b3af6e"
        ]
      }
    },
    "node:Gmail Trigger1": {
      "Gmail Trigger1": {
        "lastTimeChecked": 1751797002,
        "possibleDuplicates": [
          "197df3dd93814100",
          "197df387e73839c9"
        ]
      }
    }
  },
  "tags": [],
  "triggerCount": 3,
  "updatedAt": "2025-07-21T14:17:34.000Z",
  "versionId": "74c912d2-cbf8-47a3-b426-ff4cd09507ef"
}